import{getMetadata}from"./aem.js";import{loadFragment}from"../blocks/fragment/fragment.js";import config from"../env/default.js";import{createElement}from"./__constants.js";const delay=e=>new Promise(a=>setTimeout(a,e)),induceDelay=async e=>{await delay(e)},getFragmentData=async(e,a)=>{const t=createElement("div");let n;if(config.cookieUsage){n=new URLSearchParams(document.cookie.replaceAll("&","%26").replaceAll("; ","&")).get(e)}if(!n){const e=getMetadata(a),t=e?new URL(e,window.location).pathname:a;n=(await loadFragment(`/${window.sessionStorage.getItem("sitelang")}${t}`)).innerHTML.replace(/(\r\n|\n|\r)/gm,"")}return config.cookieUsage&&(document.cookie=`${e}=${n}; Secure`),t.innerHTML=n,t};export{induceDelay,getFragmentData};