import{$,$$,addClass,addEvent,addVendorFilesToDOM,constants,hasClass,removeClass}from"../../scripts/__constants.js";import{getFragmentData}from"../../scripts/fragment-loader.js";let markup='<div class="header-content bg-blurred brand-bordered-bottom"><div class="container"><div class="row justify-content-between"><div class="col-auto order-1 order-xl-0 flex-grow-1 flex-grow-xl-0 pr-xl-0"><div class="header-logo-wrapper"><a href="{{logo-link}}" title="{{logo-title}}" class="d-inline-flex header-logo py-3 py-xl-4"><img src="{{logo-light}}" class="header-logo-light" alt="{{logo-text}}"> <img src="{{logo-dark}}" class="header-logo-dark" alt="{{logo-text}}"></a></div></div><div class="col-auto order-0 order-xl-1 flex-grow-xl-1 p-xl-0"><div class="amegmen-wrapper"><div class="amegmen"><div class="amegmen-nav-cta"><button type="button" class="btn btn-lg py-5 btn-icon-only amegmen-nav-cta-open" aria-label="{{open-menu-label}}"><div class="amegmen-nav-cta-icon">{{open-menu}}</div></button> <button type="button" class="btn btn-lg py-5 btn-lg amegmen-nav-cta-close" aria-label="{{close-menu-label}}"><div class="amegmen-nav-cta-icon">{{close-menu}}</div></button></div><div class="amegmen-nav-wrapper"><nav><ul class="amegmen-ul-0">{{nav-items}}</ul></nav></div></div></div></div><div class="col-auto order-2"><div class="header-more-wrapper d-flex justify-content-center align-items-center"><button id="site_mode" type="button" aria-label="Mode" class="mr-3 mr-xl-4 btn btn-outline-base btn-icon-only btn-pill"><span class="icon-gm icon-light-mode">light_mode</span> <span class="icon-gm icon-dark-mode">dark_mode</span></button> <button type="button" aria-label="Search" class="mr-3 mr-xl-4 btn btn-outline-primary btn-icon-only btn-pill">{{search-icon}}</button> <a href="{{user-login-link}}" aria-label="User" class="btn btn-solid-secondary btn-pill d-none d-md-inline-flex">{{user-login-cta}}</a> <a href="{{user-login-link}}" aria-label="User" class="btn btn-icon-only btn-solid-secondary btn-pill d-inline-flex d-md-none">{{user-login-icon-only}}</a></div></div></div></div></div>';const init=async()=>{const e=await getFragmentData("header",`${constants.paths.experience}/header-fragment`);if(!e)return;const l=document.querySelector(".header-wrapper"),n=l?.querySelector(".header"),[a,t,o,r,s,i]=$(e,".header-c").children,[d,c]=a.children,[m,p]=t.children,[g,u]=o.children,[h]=r.children,[b,v]=s.children,[y,f]=i.children;console.log("==================================================searchPlaceholder, userMenu, navIcon",u,v,b);const x=$$(f.children[0],":scope > li");let A="";x.forEach(e=>{const l=$(e,":scope > a"),n=$(e,":scope > ul");addClass(l,"amegmen-nav-item"),n&&addClass(l,"amegmen-has-subnav");let a="";n&&(addClass(n,"amegmen-ul-1"),a+='<div class="amegmen-subnav"><div class="amegmen-container">',a+=`${n.outerHTML}</div></div>`),A+=`<li><h2>${l.outerHTML}</h2>${a}</li>`}),n.innerHTML=markup.replaceAll("{{logo-light}}",$(d,"a").textContent).replaceAll("{{logo-dark}}",$(c,"a").textContent).replaceAll("{{logo-text}}",$(m,"p").textContent).replaceAll("{{logo-link}}",$(p,"a").getAttribute("href")).replaceAll("{{logo-title}}",$(p,"a").textContent).replaceAll("{{search-icon}}",$(g,"p").innerHTML).replaceAll("{{user-login-link}}",$(h,"a").getAttribute("href")).replaceAll("{{user-login-cta}}",$(h,"p:nth-child(2) a").innerHTML).replaceAll("{{user-login-icon-only}}",$(h,"p:nth-child(1) a").innerHTML).replaceAll("{{open-menu}}",$(y,"p:nth-child(1)").innerHTML).replaceAll("{{open-menu-label}}",$(y,"p:nth-child(2)").textContent).replaceAll("{{close-menu}}",$(y,"p:nth-child(3)").innerHTML).replaceAll("{{close-menu-label}}",$(y,"p:nth-child(4)").textContent).replaceAll("{{nav-items}}",A),"undefined"!=typeof AMegMen&&AMegMen.create(".amegmen-wrapper");const C=$(n,"#site_mode");addEvent(C,"click",e=>{e.preventDefault(),hasClass(document.body,"light-mode")?(removeClass(document.body,"light-mode"),addClass(document.body,"dark-mode")):(addClass(document.body,"light-mode"),removeClass(document.body,"dark-mode"))});let w=0;addEvent(window,"scroll",()=>{const e=window.scrollY;e<=16||e<w?n.classList.remove("header-hidden"):e>w&&e>n.offsetHeight+48&&n.classList.add("header-hidden"),w=e})};export default function decorate(){addVendorFilesToDOM("amegmen",init)}