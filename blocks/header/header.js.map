{"version":3,"sources":["blocks/header/header.ts"],"names":[],"mappings":"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","file":"header.js","sourcesContent":["import {\n  $,\n  $$,\n  addClass,\n  addEvent,\n  addVendorFilesToDOM,\n  constants,\n  hasClass,\n  removeClass,\n} from '../../scripts/__constants';\nimport { getFragmentData } from '../../scripts/fragment-loader';\n\n/* eslint-disable */\n// START_MARKUP_INJECTION\nlet markup = `<div class=\"header-content bg-blurred brand-bordered-bottom\"><div class=\"container\"><div class=\"row justify-content-between\"><div class=\"col-auto order-1 order-xl-0 flex-grow-1 flex-grow-xl-0 pr-xl-0\"><div class=\"header-logo-wrapper\"><a href=\"{{logo-link}}\" title=\"{{logo-title}}\" class=\"d-inline-flex header-logo py-3 py-xl-4\"><img src=\"{{logo-light}}\" class=\"header-logo-light\" alt=\"{{logo-text}}\"> <img src=\"{{logo-dark}}\" class=\"header-logo-dark\" alt=\"{{logo-text}}\"></a></div></div><div class=\"col-auto order-0 order-xl-1 flex-grow-xl-1 p-xl-0\"><div class=\"amegmen-wrapper\"><div class=\"amegmen\"><div class=\"amegmen-nav-cta\"><button type=\"button\" class=\"btn btn-lg py-5 btn-icon-only amegmen-nav-cta-open\" aria-label=\"{{open-menu-label}}\"><div class=\"amegmen-nav-cta-icon\">{{open-menu}}</div></button> <button type=\"button\" class=\"btn btn-lg py-5 btn-lg amegmen-nav-cta-close\" aria-label=\"{{close-menu-label}}\"><div class=\"amegmen-nav-cta-icon\">{{close-menu}}</div></button></div><div class=\"amegmen-nav-wrapper\"><nav><ul class=\"amegmen-ul-0\">{{nav-items}}</ul></nav></div></div></div></div><div class=\"col-auto order-2\"><div class=\"header-more-wrapper d-flex justify-content-center align-items-center\"><button id=\"site_mode\" type=\"button\" aria-label=\"Mode\" class=\"mr-3 mr-xl-4 btn btn-outline-base btn-icon-only btn-pill\"><span class=\"icon-gm icon-light-mode\">light_mode</span> <span class=\"icon-gm icon-dark-mode\">dark_mode</span></button> <button type=\"button\" aria-label=\"Search\" class=\"mr-3 mr-xl-4 btn btn-outline-primary btn-icon-only btn-pill\">{{search-icon}}</button> <a href=\"{{user-login-link}}\" aria-label=\"User\" class=\"btn btn-solid-secondary btn-pill d-none d-md-inline-flex\">{{user-login-cta}}</a> <a href=\"{{user-login-link}}\" aria-label=\"User\" class=\"btn btn-icon-only btn-solid-secondary btn-pill d-inline-flex d-md-none\">{{user-login-icon-only}}</a></div></div></div></div></div>`;\n\n// END_MARKUP_INJECTION\n/* eslint-enable */\n\ndeclare const AMegMen: any;\n\nconst init = async () => {\n  const thisBlock = await getFragmentData(\n    'header',\n    `${constants.paths.experience}/header-fragment`,\n  );\n\n  if (!thisBlock) {\n    return;\n  }\n  const headerWrapper = document.querySelector('.header-wrapper');\n  const headerEl = headerWrapper?.querySelector('.header');\n  const [logoImageRow, logoAltLinkRow, searchRow, userRow1, userRow2, navRow] = $(\n    thisBlock,\n    '.header-c',\n  ).children;\n  const [lightLogo, darkLogo] = logoImageRow.children;\n  const [logoAlt, logoLink] = logoAltLinkRow.children;\n  const [searchIcon, searchPlaceholder] = searchRow.children;\n  const [userCta] = userRow1.children;\n  const [userIcon, userMenu] = userRow2.children;\n  const [navIcon, navMenu] = navRow.children;\n\n  console.log(\n    '==================================================searchPlaceholder, userMenu, navIcon',\n    searchPlaceholder,\n    userMenu,\n    userIcon,\n  );\n\n  const navMainLi = $$(navMenu.children[0], ':scope > li'); //$$(navMenu, 'ul > li');\n  let navStr = '';\n\n  navMainLi.forEach((l0Li: HTMLElement) => {\n    const anchor = $(l0Li, ':scope > a');\n    const childUl = $(l0Li, ':scope > ul');\n    addClass(anchor, 'amegmen-nav-item');\n    childUl && addClass(anchor, 'amegmen-has-subnav');\n\n    let subnavStr = '';\n    if (childUl) {\n      addClass(childUl, 'amegmen-ul-1');\n      subnavStr += '<div class=\"amegmen-subnav\"><div class=\"amegmen-container\">';\n      subnavStr += `${childUl.outerHTML}</div></div>`;\n    }\n\n    navStr += `<li><h2>${anchor.outerHTML}</h2>${subnavStr}</li>`;\n  });\n\n  headerEl.innerHTML = markup\n    .replaceAll('{{logo-light}}', $(lightLogo, 'a').textContent)\n    .replaceAll('{{logo-dark}}', $(darkLogo, 'a').textContent)\n    .replaceAll('{{logo-text}}', $(logoAlt, 'p').textContent)\n    .replaceAll('{{logo-link}}', $(logoLink, 'a').getAttribute('href'))\n    .replaceAll('{{logo-title}}', $(logoLink, 'a').textContent)\n    .replaceAll('{{search-icon}}', $(searchIcon, 'p').innerHTML)\n    .replaceAll('{{user-login-link}}', $(userCta, 'a').getAttribute('href'))\n    .replaceAll('{{user-login-cta}}', $(userCta, 'p:nth-child(2) a').innerHTML)\n    .replaceAll('{{user-login-icon-only}}', $(userCta, 'p:nth-child(1) a').innerHTML)\n    .replaceAll('{{open-menu}}', $(navIcon, 'p:nth-child(1)').innerHTML)\n    .replaceAll('{{open-menu-label}}', $(navIcon, 'p:nth-child(2)').textContent)\n    .replaceAll('{{close-menu}}', $(navIcon, 'p:nth-child(3)').innerHTML)\n    .replaceAll('{{close-menu-label}}', $(navIcon, 'p:nth-child(4)').textContent)\n    .replaceAll('{{nav-items}}', navStr);\n\n  if (typeof AMegMen !== 'undefined') {\n    AMegMen.create('.amegmen-wrapper');\n  }\n\n  const modeCta = $(headerEl, '#site_mode');\n  addEvent(modeCta, 'click', (event) => {\n    event.preventDefault();\n    if (hasClass(document.body, 'light-mode')) {\n      removeClass(document.body, 'light-mode');\n      addClass(document.body, 'dark-mode');\n    } else {\n      addClass(document.body, 'light-mode');\n      removeClass(document.body, 'dark-mode');\n    }\n  });\n\n  let lastScrollY = 0; // Initialize with 0, as the page starts at the top\n  const scrollHideThreshold = 48; // How many pixels to scroll down past the header's height before it hides\n  const topVisibilityOffset = 16; // Header is always visible if scrollY is within this many pixels from top (e.g., 0-10px)\n\n  addEvent(window, 'scroll', () => {\n    const currentScrollY = window.scrollY;\n\n    // --- Condition to SHOW the header ---\n    // 1. If at or very near the top of the page\n    // OR\n    // 2. If scrolling up (regardless of how much, for immediate feedback)\n    if (currentScrollY <= topVisibilityOffset || currentScrollY < lastScrollY) {\n      headerEl.classList.remove('header-hidden');\n    }\n    // --- Condition to HIDE the header ---\n    // Only hide if:\n    // 1. Scrolling down\n    // AND\n    // 2. Scrolled past the combined height of the header plus the scrollHideThreshold\n    else if (\n      currentScrollY > lastScrollY &&\n      currentScrollY > (headerEl as HTMLElement).offsetHeight + scrollHideThreshold\n    ) {\n      headerEl.classList.add('header-hidden');\n    }\n\n    // Update the last scroll position for the next comparison\n    lastScrollY = currentScrollY;\n  });\n};\n\nexport default function decorate() {\n  addVendorFilesToDOM('amegmen', init);\n}\n"]}