{"version":3,"sources":["blocks/accordion/accordion.ts"],"names":[],"mappings":"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","file":"accordion.js","sourcesContent":["import {\n  $,\n  addClass,\n  addEvent,\n  createElement,\n  generateUniqueId,\n  hasClass,\n  removeClass,\n  slideDown,\n  slideUp,\n  wrapElements,\n} from '../../scripts/__constants';\n\nconst init = (block: Element) => {\n  const parent = block.closest('.accordion-section');\n  if (parent.getAttribute('data-containerize') === 'true') {\n    addClass(block.closest('.accordion-wrapper'), 'container');\n    wrapElements([block], {\n      className: 'col-12',\n    });\n    wrapElements([block.closest('.col-12')], {\n      className: 'row',\n    });\n  }\n\n  const accordionItems = Array.from(block.children);\n\n  accordionItems.forEach((accordionItem) => {\n    addClass(accordionItem, 'accordion-item');\n    const [accordionHeader, accordionBody, accordionToggle] = Array.from(accordionItem.children);\n    const uniqueId = generateUniqueId('accordion_item_');\n    const headerElement = $(accordionHeader, 'h2, h3, h4, h5, h6');\n    const headerBtn = createElement('button');\n    const isOpen = ($(accordionToggle, 'p')?.textContent || '') === 'open';\n\n    addClass(accordionBody, 'accordion-collapse');\n    addClass(accordionToggle, 'accordion-toggle');\n    accordionBody.setAttribute('id', uniqueId);\n    accordionToggle.setAttribute('aria-hidden', 'true');\n\n    headerBtn.setAttribute('type', 'button');\n    headerBtn.innerHTML = `${headerElement.innerHTML}<span class=\"icon-gm accordion-icon-open\">add</span>\n      <span class=\"icon-gm accordion-icon-close\">remove</span>`;\n    addClass(headerBtn, 'accordion-button');\n    headerBtn.setAttribute('aria-expanded', 'false');\n    headerBtn.setAttribute('aria-controls', uniqueId);\n    if (isOpen) {\n      headerBtn.setAttribute('aria-expanded', 'true');\n      addClass(accordionBody, 'accordion-collapse-active');\n      addClass(accordionItem, 'accordion-item-active');\n      (accordionBody as HTMLElement).style.display = 'block';\n    }\n\n    addEvent(headerBtn, 'click', () => {\n      if (hasClass(accordionBody, 'accordion-collapse-active')) {\n        slideUp(accordionBody);\n        headerBtn.setAttribute('aria-expanded', 'false');\n        removeClass(accordionBody, 'accordion-collapse-active');\n        removeClass(accordionItem, 'accordion-item-active');\n      } else {\n        slideDown(accordionBody);\n        headerBtn.setAttribute('aria-expanded', 'true');\n        addClass(accordionBody, 'accordion-collapse-active');\n        addClass(accordionItem, 'accordion-item-active');\n      }\n    });\n\n    headerElement.innerHTML = '';\n    headerElement.appendChild(headerBtn);\n    addClass(headerElement, 'accordion-header');\n  });\n};\n\nexport default async function decorate(block: Element) {\n  init(block);\n}\n"]}